---
title: 📝指标注册
sidebar_position: 1
tags:
  - MDX
---

指标注册页面是用于注册单个新指标或者批量上传指标定义的功能页面。以下是该功能页面的主要内容和功能：

1. **基础信息**：指标的基础信息，例如指标名称、描述、单位等。这些信息是指标的基本属性，用于帮助用户更好地理解和使用指标。
2. **模型信息**：与指标相关的模型信息，例如模型名称、模型实体，维度和度量等。

## 创建业务域

指标管理中不管是通过业务域, 产品线还是部门对指标进行分类管理, 都需要一个组织结构来管理不同属性类别的指标. 我们通过业务域分组来对指标进行管理.

参考 [业务域管理](../server/organization/business-area)

1. 首先打开**业务域**页面, 点击新建业务域, 输入名称如 **财务**;
2. 点击财务行上的添加按钮继续添加子业务域, 如**管理报告**;
3. 再继续添加管理报告的子板块: **核心指标**, **营收指标**, **损益指标** 等;

## 注册指标

接下来创建具体指标.

:::tip 编码唯一性

指标编码只在语义模型的多维数据集内限制唯一性, 在业务域或全局不限制, 由用户自己进行规范.

:::

1. 打开注册指标页面, 输入以下指标信息:

- 基础信息

| 名称     | 描述                                                                                     |
| -------- | ---------------------------------------------------------------------------------------- |
| 指标名称 | 指标的语言描述, 从管理角度来说, 指标体系统一后指标名称不会重复, 但是系统本身不做强制限制 |
| 指标代码 | 统一的指标编码, 方便用户记忆和查询指标                                                   |
| 业务域   | 指标所属的业务板块(即业务域), 例如我们可以将**公司总营业收入**放入核心指标业务域         |
| 认证流程 | 指标在指标系统中的认证流程                                                               |
| 创建人   | 指标的创建人                                                                             |
| 负责人   | 指标在业务上的负责人                                                                     |
| 度量单位 | 指标的数量单位如 **元**                                                                  |
| 有效期   | 指标的有效周期截至时间                                                                   |
| 是否激活   | 指标是否激活状态                                                                      |
| 指标应用可用  | 指标是否适用指标应用                                                                      |
| 业务口径 | 对本指标从口径上进行语言描述，指标业务口径的定义需要根据具体业务场景和需求进行，一般由业务专家、数据分析师、数据管理人员等共同制定。同时，指标业务口径也需要与数据源的设计相匹配，以确保指标的计算结果正确、可靠、可重复。|

- 模型信息

| 名称     | 描述                                                                                                                      |
| -------- | ------------------------------------------------------------------------------------------------------------------------- |
| 语义模型 | 指标所属的语义模型                                                                                                        |
| 模型实体 | 指标数据来源的语义模型中的某个多维模型                                                                                    |
| 指标类型 | **基础指标**: 从语义模型现有度量字段中选择指标所使用的度量 <br/> [**衍生指标**](./derivative-indicator/): 通过计算公式结合现有度量和维度得到的数据值 |
| 是否可见   | 指标在前端使用时是否对用户可见                                                          |
| 度量     | 当指标类型为**基础指标**时, 选择一个度量作为指标的数量值                                                                  |
| 计算公式 | 当指标类型为**衍生指标**时, 输入指标度量值的计算公式                                                                      |
| 聚合类型 | 当指标类型为**衍生指标**时, 为计算公式指定一种聚合类型; **基础指标**时默认使用度量的聚合类型                               |
| 自由维度 | 此指标在多维模型上不作限制的维度, 将会在实际展示时对自由维度进行选择或限制                                                |
| 限定条件 | 指标在多维模型上除自由维度外其他维度做条件限制. 详见 [指标限定条件](./restrictive-condition/)                                 |

1. 提交即保存
2. 下载模板: 可以下载进行批量上传的模板文件, 批量填入指标信息后进行文件上传批量录入指标.
3. 批量上传: 上传模板文件格式的指标文件, 批量录入指标.

注册之后可以在我的指标页面查看.

## 预览

在指标注册页面, 可以实时预览指标的数据走势, 以便于用户在录入指标时能够更好地理解指标的数据来源和数据走势.
在指标注册完成后，点击 **数据预览** 按钮，即可查看指标的数据走势。

![Preview of indicator](/public/img/indicator/indicator-register-preview.png)

## 批量上传

对于期初指标录入或批量指标创建可以使用批量上传功能.

首先需要下载批量上传指标数据的模型文件, 为了便于手工整理指标数据可以通过下载某个类似指标的的数据, 然后进行复制修改来快速地整理指标, 打开已有指标或录入一个指标然后点击 **下载模板** 按钮下载当前指标的数据作为模板. 整理好指标数据后, 点击 **批量上传** 按钮进行上传.

如下图所示，批量导入时用户可以逐个修改指标的属性配置，然后点击“导入“按钮完成指标的批量导入。

![指标批量导入](/public/img/indicator/indicator-batch-import.png)

下面是一个指标的 Yaml 格式的模版

```yaml
- name: ADJ Rosy Sunglasses 利润
  code: 'Demo: ADJ-R-Sun Profit'
  isActive: true
  isApplication: true
  visible: true
  businessAreaId: 13ce2de2-a53f-4ad8-9c9d-8806291c77ec
  authentication: ERP
  business: |-
    产品“ADJ Rosy Sunglasses”的利润，是主营业务收入减去主营业务成本和主营业务税金及附加费用得来的利润。
    由于主营业务利润还未减去销售费用、管理费用、财务费用等期间费用，尚不能完整反映公司主营业务的盈利状况
  principal: 王体文
  validity: '2023-04-29T16:00:00.000Z'
  type: BASIC
  modelId: a379cb26-19bd-4f82-84d7-db8a7c782385
  entity: Sales
  filters:
    - members:
        - value: '[ADJ].[ADJ Rosy Sunglasses]'
          label: ADJ Rosy Sunglasses
      dimension:
        dimension: '[Product]'
  dimensions:
    - '[Time]'
    - '[Store]'
    - '[Promotions]'
    - '[Customers]'
  measure: Profit
  formula: null
  unit: RMB
  tags:
    - name: 销售
      category: indicator
      color: blue
    - name: 财务
      category: indicator
      color: blue
```
