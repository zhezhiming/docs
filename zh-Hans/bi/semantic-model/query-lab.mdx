---
title: 🧪查询实验室
sidebar_position: 5
tags:
  - MDX
  - SQL
---

查询实验室提供了使用查询语句灵活操作数据源实体(物理表视图或者多维数据集)的功能, 帮助用户进行日常的数据运维工作.

查询实验室使用语句查询数据支持以下三种查询情景:

* SQL 模型的源数据库表;
* MDX 模型的源数据库表;
* XMLA 数据源的源多维数据集(Cube);

也就是说只能对模型界面中的 **数据表** 区域内的数据源实体进行查询, 不能对 **模型** 区域内的模型进行查询.

## 通用操作

打开语义模型, 点击工具栏中的 **查询** 菜单按钮, 会转到查询实验室界面。初始时系统会创建一个空查询, 用户也可以点击新建查询进行添加.

将数据表拖至表结构区域, 可以查询其详细字段信息和成员组成. 将表, 字段或成员拖至代码编辑区域可以插入相应的名称，在查询语句编写完成后, 点击 *执行* 将执行查询语句并查看数据结果.
将表结构区域内的表或字段拖至查询结果区域可以直接查询相应的数据结果，表名将查询表所有字段的数据，字段名将查询该字段的成员数据。

点击结果工具栏左侧更多按钮, 可以关闭所有结果集, 或者点击下载当前结果集.

### 保存为模型

如果是在 SQL 语义模型中, 编辑好语句后可以将当前语句另存为 SQL 模型, 进行之后的建模工作. (待完善)

## SQL 数据源表查询

当语义模型是使用 SQL 数据源的 MDX 多维模型或者 SQL 多维模型时, 查询实验室可以对数据源中的表视图进行查询. 要对所创建的 MDX 多维数据集进行 MDX 语句查询可以到多维数据集设计器中的查询界面进行.

将数据表区域里的表名拖至查询的表结构区域内, 点击表的展开按钮拉取表字段, 继续展开类型为 `D` 的字段可以拉取其字段值列表.

所有信息都可以拖至右侧编辑器中以帮助用户进行 SQL 语句的编写工作.

![](./mdx-sql-query.png)

## XMLA 数据源的多维数据集查询

当语义模型是连接的 XMLA 数据源时, 查询实验室使用 MDX 语句进行数据查询.

这种场景下数据表区域里的实体是 XMLA 数据源的多维数据集列表.

新建查询, 并将数据表区域里的多维数据集拖至查询中的表结构区域内, 然后点击几点展开按钮拉取多维数据集的维度和度量信息.

依次向下展开可以拉去得到 **维度/层次结构/层级/成员/成员...**

全部这些信息节点都可以拖至右侧编辑器中, 帮助用户进行 MDX 语句的编写.

![](./mdx-query-lab.png)

