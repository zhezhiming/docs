---
title: MCP 工具
sidebar_position: 8
---

[模型上下文协议 (MCP)](https://modelcontextprotocol.io/introduction)

> MCP 是一个开放协议，它标准化了应用程序如何为大型语言模型（LLMs）提供上下文。可以将 MCP 想象成 AI 应用程序的 USB-C 端口。正如 USB-C 为你的设备提供了连接各种外围设备和配件的标准化方式，MCP 为 AI 模型提供了一种连接不同数据源和工具的标准化方式。

## 为什么选择 MCP？

MCP 帮助你在大型语言模型（LLMs）之上构建代理和复杂的工作流程。LLMs 经常需要与数据和工具集成，而 MCP 提供了：

- 一个不断增长的预构建集成列表，你的 LLM 可以直接接入
- 在 LLM 提供商和供应商之间切换的灵活性
- 在你的基础设施内保护数据的最佳实践

## 如何创建？

在数字专家工作空间中，选择 MCP 工具类型，点击创建 MCP 工具集的卡片进行新建。

按照下图所示，填写必要的名称等字段后，将 MCP 服务配置填入命令、参数等字段，点击“连接”尝试用当前配置加载工具列表。

![创建 MCP 工具集](/public/img/ai/xpert/create-mcp-toolset.png)

:::warning 安全警告
在开源代码版本中针对使用“命令”运行的 MCP 工具会给出安全提示：“命令”会直接在后端服务器中运行，可能存在安全隐患，升级到 **Pro** 版后“命令”工具将被安全地运行在 Sandbox 容器中。
:::

加载出 MCP 工具集的工具列表后，用户对单个工具设置是否启用。也可以设置 “**默认禁用工具**” 也就是在没有明确启用的工具将默认是关闭状态。

## 示例

- **Sequential Thinking**: 一个 MCP 服务器实现，通过结构化的思维过程提供动态和反思性问题解决的工具。

    ```json
    {
    "mcpServers": {
        "sequential-thinking": {
        "command": "npx",
        "args": [
            "-y",
            "@modelcontextprotocol/server-sequential-thinking"
        ]
        }
    }
    }
    ```
- **Playwright**: 一个使用 Playwright 提供浏览器自动化功能的模型上下文协议（MCP）服务器。该服务器使大型语言模型（LLMs）能够通过结构化的可访问性快照与网页交互，无需截图或视觉优化的模型。
    ```json
    {
        "mcpServers": {
            "playwright": {
                "transport": "stdio",
                "command": "npx",
                "args": [
                    "-y",
                    "@playwright/mcp@latest",
                    "--headless"
                ]
            }
        }
    }
    ```
- **Blender**: BlenderMCP 通过模型上下文协议（MCP）将 Blender 连接到 Claude AI，使 Claude 能够直接与 Blender 交互并控制它。这种集成支持基于提示的 3D 建模、场景创建和操作。
    ```json
    {
        "mcpServers": {
            "blender": {
                "command": "uvx",
                "args": [
                    "blender-mcp"
                ]
            }
        }
    }
    ```
- 更多 [MCP.so](https://mcp.so/)

## 传输协议

MCP（模型上下文协议）有两种主要通信模式：标准输入输出（stdio）命令模式和HTTP服务器发送事件（SSE）模式。

### 标准输入输出模式

这是标准输入输出通信模式，运行服务器作为本地进程，通过标准输入（stdin）和标准输出（stdout）进行交互。适合开发和测试场景，不需要网络连接。

### HTTP SSE 模式

这是远程通信模式，客户端连接到服务器的HTTP端点，通过SSE接收实时事件，并通过HTTP POST发送命令。适合需要远程访问和实时数据流的应用。

### 模式对比

以下表格总结了两种模式的差异，帮助理解它们的适用场景和特性：

| **特性**              | **标准输入输出模式**                     | **HTTP SSE模式**                     |
|-----------------------|-----------------------------------------|--------------------------------------|
| **通信方式**          | 本地stdin/stdout                        | HTTP POST（命令）+ SSE（事件）        |
| **适用场景**          | 本地开发、测试                          | 远程访问、实时数据流                  |
| **网络需求**          | 服务器本地网络                                | 通过网络连接其他服务器                         |
| **实时性**            | 同步，适合阻塞操作                      | 异步，支持实时事件推送                |
| **安全性**            | 本地操作，较低网络安全风险              | 需要处理网络认证和授权                |
| **示例工具**          | Quarkus MCP stdio扩展                   | Supergateway、Cloudflare远程部署      |

## 代码 MCP 工具

代码 MCP 工具提供了一种更灵活的方式，允许用户直接在线编写 MCP 工具的后端逻辑代码，并以 MCP 协议的形式运行和调用。通过这种方式，开发者无需额外部署服务器或构建完整项目，就可以实现模型调用外部 API、执行逻辑处理等功能，极大地提升了 MCP 工具的扩展能力与开发效率。

在创建 MCP 工具时选择“代码”类型，即可进入在线编辑器页面。编辑器支持 Python 语法（未来也将支持 JavaScript），并提供基础模板用于快速入门。

![MCP 代码工具](/public/img/ai/xpert/mcp-code-type.png)

### 开发体验

代码 MCP 工具本质上是一段自定义实现的 MCP 服务器代码，系统会将其托管并运行在沙箱容器中，自动暴露符合 MCP 协议的接口。你可以专注于编写自己的业务逻辑，包括但不限于：

- 调用第三方 API，例如天气查询、股票行情、翻译服务等
- 调用企业内部系统接口，如 ERP、CRM
- 实现数据处理逻辑，如格式转换、过滤、聚合
- 将结构化输入转化为自然语言输出，或反向操作

### 调试与测试

- 编辑器中内置了测试面板，可以模拟参数调用，方便实时调试工具逻辑。
- 所有运行环境均为隔离沙箱环境，保障运行安全。

### 多工具支持

一个代码 MCP 工具可以注册多个 MCP 工具，通过多个 `@mcp.tool()` 创建，系统会自动识别并生成工具列表，供模型调用。

## MCP 工具市场

MCP 工具市场提供了丰富的工具集成模块，支持用户在无需编写复杂代码的前提下，快速扩展模型的感知和行动能力。你可以通过一键安装方式，将各类 MCP 工具添加到智能体工具集中，立即实现外部信息获取、第三方服务调用、数据处理能力等。

![MCP 市场](/public/img/ai/xpert/mcp-marketplace.png)

### 工具分类丰富，覆盖多种场景

MCP 工具市场支持多个类型的工具，涵盖以下典型应用场景：

- **Agent 智能体支持**：如 `Sequential Thinking` 提供结构化思考链，支持 Agent 的多步推理和任务规划。
- **系统工具**：如 `Memory Server` 提供运行期数据缓存与上下文状态管理，支持 AI 系统持续对话记忆。
- **浏览器操作**：如 `Playwright MCP` 支持浏览器自动化操作，实现网页数据抓取、登录操作等任务。
- **地图服务**：如 `Baidu Map` 和 `AMap` 兼容 MCP 协议，支持坐标解析、路径规划等能力。
- **实用工具类**：如 `Time MCP Server` 支持时区转换，`Fetch` 支持网页内容抓取与转换，`Firecrawl` 支持高级爬虫功能。
- **文档处理**：如 `Perplexity` 可调用文档问答与搜索引擎，`GitHub MCP` 用于仓库搜索、代码读取等。
- **Dify 工具集成**：包括 `Dify Knowledgebase`、`Dify Workflow`、`Dify Chatflow` 等，提供与 Dify 平台的无缝对接。

### 工具形态多样：SSe、Stdio 与 Code

每个 MCP 工具支持以下两种形态：

- **SSE**：配置已有的 SSE 接口 MCP 工具服务。
- **Studio 工具（STUDIO）**：由开发者上传、托管并注册在 MCP 官方服务中，用户可直接安装使用。
- **代码工具（CODE）**：由开发者在平台内通过在线代码方式自定义创建，灵活性更强，适合企业内部自建工具。

### 快速启用与搜索

- 可按类别（如 Agent、Workflow、Utils、Analysis）快速筛选工具。
- 支持关键词搜索与标签导航，快速定位所需工具。
- 工具页面展示调用次数、所属开发者、支持标签、调用参数等详细信息，便于选型。

---

MCP 工具市场的存在，使得 AI Agent 能力不再局限于模型本身，而可以通过丰富的工具体系连接到业务系统、数据服务与真实世界。未来将支持更多社区与企业开发者加入生态，共同丰富工具生态、提升 AI Agent 的实际效能。
