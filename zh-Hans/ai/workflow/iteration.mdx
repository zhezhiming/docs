---
title: 迭代
sidebar_position: 16
---

**迭代节点** 是面向“循环”处理场景的核心组件，可以自动化处理结构化数据（**数组/对象**）。通过灵活配置子智能体或工作流，结合并行处理与智能错误处理机制，可显著提升复杂任务的执行效率。

![Iterating node](/public/img/ai/workflow/iterating-node.png)

## 核心功能解析

### 1. 数据结构支持
| 数据类型  | 处理方式                          | 输出形式                |
|-----------|-----------------------------------|-------------------------|
| **数组**  | 遍历每个元素（索引顺序或乱序）    | 新数组（处理后元素集合）|
| **对象**  | 遍历每个键值对（属性级处理）      | 新对象（重组键值对）    |

### 2. 处理模式
| 模式          | 执行方式                          | 适用场景                          |
|---------------|-----------------------------------|-----------------------------------|
| **逐个处理**  | 顺序执行                      | 数据强依赖、资源敏感型任务        |
| **并行处理**  | 多线程并发（可配置并发数）        | I/O密集型、独立元素处理任务       |

### 3. 错误处理策略
| 策略                | 行为描述                          | 数据完整性保障                |
|----------------------|-----------------------------------|-------------------------------|
| **报错中断**         | 立即停止流程并抛出异常            | 全量数据一致性要求高          |
| **忽略错误**         | 跳过错误项，保留原始数据          | 允许部分失败，日志记录错误    |
| **移除错误结果**     | 自动过滤失败项，输出有效结果集    | 结果可用性优先                |

## 最佳实践指南

### 模式选择建议
- 优先使用 **并行处理** 当：
  - 元素处理逻辑无状态依赖
  - 外部API/服务具有高可用性

- 采用 **逐个处理** 当：
  - 需要维护处理顺序（如时间序列数据）
  - 涉及事务性操作（如数据库写操作）
  - 处理过程消耗大量计算资源

### 错误策略决策树
```plaintext
                   开始
                     │
         ┌───────────┴───────────┐
         ▼                       ▼
  是否允许部分失败？          必须100%成功
         │                       │
   ┌─────┴─────┐             ┌────┴───┐
   ▼           ▼             ▼        ▼
保留原始数据  仅需有效结果   选择"报错中断"
   │           │
选择"忽略错误" 选择"移除错误结果"
```

通过合理运用迭代节点，用户可构建从简单数据清洗到复杂业务流程自动化的一体化解决方案。
