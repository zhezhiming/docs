---
title: 子流程
sidebar_position: 14
---

子流程（Subflow）节点是 XpertAI 工作流编排系统中的一种特殊节点类型，用于将一段完整的流程逻辑封装为独立模块，在主流程中以“调用方式”复用执行。这一设计极大提升了流程的**模块化管理能力、复用性和可维护性**。

## 🛠 功能用途

子流程节点适用于以下典型场景：

* 对多个流程中重复出现的逻辑进行复用，如入职初始化、发票审批、故障排查等；
* 将复杂逻辑拆分为结构清晰的模块，主流程保持简洁；
* 独立开发、测试、维护局部流程逻辑，降低主流程变更风险。

## 🧷 使用示例：员工入职流程中的子流程节点

在某公司“员工入职自动化流程”中，使用子流程节点【入职办理】，封装了以下 IT 初始化操作：

* 创建员工企业邮箱
* 分配办公设备
* 添加至部门邮件组
* 发送欢迎邮件

👇 **流程示意图（部分）：**

![Subflow node](/public/img/ai/workflow/workflow-subflow.png)

---

## 🧬 节点能力说明

| 能力       | 描述                                |
| -------- | --------------------------------- |
| 输入参数传递   | 主流程可向子流程传递上下文参数（如员工姓名、邮箱）         |
| 输出结果返回   | 子流程执行完成后可返回处理结果至主流程               |
| 异常隔离与容错  | 子流程失败可单独处理，不影响主流程全局               |
| 多处复用     | 子流程可被多个主流程调用，如“实习生入职”、“转岗流程”等     |
| 嵌套支持（可选） | 子流程中也可再次引用其他子流程（如启用），实现更复杂的多层逻辑组织 |

**子流程** 节点支持在主流程与子流程之间传递参数，分为 **输入变量** 与 **输出变量** 两类，具体说明如下：

### 🔸 输入变量

用于将主流程中的数据传递给子流程使用。

如图所示，配置格式为：

```
主流程变量 ➝ 子流程变量
```

例如：

| 子流程变量（接收）       | 主流程变量（来源）       |
| --------------- | --------------- |
| `employee_name` | `employee_info` |

表示主流程中的 `employee_info` 变量，将被传入子流程中赋值给 `employee_name` 变量。

### 🔸 输出变量

用于将子流程中的处理结果回传给主流程。

配置格式为：

```
子流程变量 ➝ 主流程变量
```

例如：

| 主流程变量（接收） | 子流程变量（来源）        |
| --------- | ---------------- |
| `email`   | `sys.user_email` |

表示子流程中的 `sys.user_email` 将被输出到主流程变量 `email` 中，供后续节点使用，如 `subflow_jzsikojwdp_channel.email` 对应到“子流程”节点的 `email` 输出变量。

### ✅ 操作提示：

* 可通过点击 `➕` 按钮添加多个映射条目。
* 子流程变量来源通常为子流程中的系统变量或中间计算结果。

通过此机制，*子流程***节点实现了流程模块间的数据解耦与复用，是构建大型流程自动化系统的关键能力。

## ⚙ 使用指引  

### 如何创建子流程节点？

1. 添加一个新的子流程节点，命名为子流程（例如“入职办理子流程”）
2. 向该流程中添加一个智能体节点作为入口
3. 添加该智能体节点所属的流程中更多的节点
4. 配置输入输出参数映射

---

## 🚀 应用价值

* ✅ 提高流程复用率，避免重复建设
* ✅ 降低主流程复杂度，提高可读性
* ✅ 支持流程职责拆分，利于多团队协作
* ✅ 提升流程可维护性和可扩展性

---

## 📘 示例数字专家：Smart HR Assistant（智能人事助理）

在入职自动化场景中，使用子流程节点，构建出结构清晰、自动执行的入职流程，参考模版 [Smart HR Assistant](https://app.mtda.cloud/explore?search=Smart%20HR%20Assistant) 。