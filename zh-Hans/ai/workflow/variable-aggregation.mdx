---
title: 变量聚合
sidebar_position: 18
---

**变量聚合节点**是数字专家工作流中用于**整合多个输入变量**并生成统一输出结果的关键逻辑节点。
它相当于工作流中的一个“变量汇总器”，能将来自不同节点、不同上下文的数据进行汇聚、去重、过滤和再组织，以便在后续步骤中被智能体或算法节点高效利用。

该节点通常应用于涉及多分支合流、数据汇总、状态聚合等复杂工作流中，为工作流提供更强的灵活性与可扩展性。

## ⚙️ 功能特点

### 1. 多输入变量的统一聚合

变量聚合节点可以接收来自多个节点的输出结果（如计算结果、API响应、文档提取内容等），并将它们**自动组合为统一的变量集合**。
通过这种方式，工作流可以在分支执行后合流时快速恢复上下文，不必依赖外部逻辑实现复杂的变量同步。

### 2. 自动过滤无效数据

系统会在聚合过程中**自动过滤空值（null、undefined）或无效变量**，确保最终输出的数据结构清晰、准确，避免无意义的数据污染下游节点。

### 3. 支持灵活的数据结构输出

聚合后的结果可根据配置输出为：

* 数组（常用于批量数据场景）
* 字符串（如拼接文本）
* 对象（如字段合并）
  从而满足不同类型节点（AI 模型、运算节点、条件判断节点等）的输入需求。

## 📊 输出结果

聚合节点的输出结果默认包含两个通道：

| 输出变量       | 类型   | 说明                    |
| ---------- | ---- | --------------------- |
| **result** | 动态类型 | 聚合后的最终结果（数组或对象）       |
| **error**  | 字符串  | 聚合过程中出现的错误信息（如无效变量路径） |

这些输出可直接作为后续节点的输入，实现自动的数据流转与上下文管理。

## 🚀 功能价值总结

| 功能价值           | 说明                 |
| -------------- | ------------------ |
| **简化分支逻辑**     | 自动聚合多路径输出，减少手动变量管理 |
| **提升数据一致性**    | 自动过滤空值、统一输出结构      |
| **增强可扩展性**     | 可通过插件策略扩展不同聚合逻辑    |
| **支持智能体上下文共享** | 促进跨节点、跨任务的数据流畅传递   |

---

**总而言之**，
「变量聚合节点」是 XpertAI 工作流中连接分支与合流的重要枢纽，
让数据的流转更智能，逻辑的编排更简洁，
是构建多智能体协同与复杂任务自动化不可或缺的基础模块。
