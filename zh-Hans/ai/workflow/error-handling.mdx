---
title: 错误处理
sidebar_position: 4
---

## 背景
在复杂的 AI 工作流中，数字专家智能体通常包含多个节点，每个节点可能涉及 API 调用、数据处理或大语言模型（LLM）推理等任务。然而，某个节点的异常（如 API 请求失败或 LLM 输出异常）可能导致整个流程运行失败，给开发者带来较大的排查和维护成本。特别是在复杂的工作流场景下，单点故障可能严重影响业务连续性。

为了解决这一问题，Xpert AI 智能体零代码平台提供了多样化的异常处理机制，使工作流能够在局部故障发生时不中断主流程，并具备更强的容错性和灵活性。

## 异常处理策略

![Error handling](/public/img/ai/workflow/error-handling.png)

Xpert AI 平台的异常处理机制包括以下几种策略：

### 1. 失败重试
对于可能发生短暂性故障的节点，例如 API 请求失败或 LLM 生成超时，Xpert AI 允许设置最大重试次数。在重试机制下，系统会在一定的时间间隔后重新执行失败的节点，直到达到最大尝试次数。如果仍然失败，则抛出异常或采取后续处理措施。

**适用场景**
- API 调用因网络抖动导致请求失败
- LLM 生成超时或返回不完整
- 数据库查询偶发超时

### 2. 备用模型切换
当主模型发生异常（如 OpenAI API 无响应或特定模型不可用）时，Xpert AI 支持自动切换到备用模型继续任务。这种策略确保智能体能够保持高可用性，而不会因单一模型故障导致整个任务失败。

**适用场景**
- 主要 AI 模型出现网络故障或不可用
- 备用 AI 模型能够提供相似质量的结果
- 任务对延迟容忍度较低，需要快速响应

### 3. 备用路径与异常分支
在无法通过重试或备用模型解决问题的情况下，Xpert AI 支持定义异常输出消息或转向备用路径。智能体可以设置默认响应，如提供通用答案、提示用户稍后重试，或者直接将任务转交给人工处理。

![Fail branch](/public/img/ai/workflow/fail-branch.png)

**适用场景**
- 业务流程允许降级处理，例如提供默认推荐方案
- 需要通知用户当前服务不可用，并提供替代方案
- 关键任务失败后需进入人工审核或人工客服介入
