---
title: 工具调用
sidebar_position: 31
---

在 XpertAI 工作流系统中，**工具节点**用于调用外部能力与服务，支持数据处理、系统集成、MCP工具调用等多种功能。通过工具节点，用户可以将复杂逻辑与第三方系统能力无缝整合进自动化流程中。

## 工具类型概览

工具节点支持三类工具接入方式：

* **内置工具**：由 XpertAI 官方提供，开箱即用，部分工具在首次使用前需进行授权配置。
* **自定义工具**：用户可通过标准接口（如 OpenAPI/Swagger/OData）导入或手动配置，适用于接入企业内部系统或专有服务。
* **MCP 工具**：支持高度定制，适用于复杂业务逻辑或异步任务，用户可选择已有模块或自行开发。

> ✅ 所有工具均可在「XpertAI → 工作空间 → 工具」菜单中统一创建和管理。

---

## 工具节点参数配置

在使用工具节点时，需在**属性面板**中完成工具选择与参数配置。具体操作流程如下：

1. **添加工具节点**
   在工作流画布中插入「工具」节点。

2. **选择工具集与工具**
   在右侧属性面板中，依次选择：

   * **工具集**（即创建的工具集）
   * **工具**（工具集中的某个工具）

3. **配置输入参数变量**
   工具通常需要输入参数，如用户ID、关键词、时间范围等。你可以使用工作流中的状态变量作为输入，例如：

   ```text
   用户输入内容 → ${human.input}
   当前时间 → ${sys.datetime}
   上一个节点的输出 → ${<node_name>.result}
   ```

   * 可以通过工具“复制参数示例”查看参数格式。
   * 支持使用 `{{变量}}` 语法进行引用。

4. **输出处理（可选）**
   工具调用成功后，其返回结果将以变量形式提供给后续节点。你可以通过变量名（如 `${<tool_name>.text}`）在下游使用或映射指定字段。

---

## 高级功能：异常处理机制

为保证流程稳定性，工具节点支持**异常处理配置**：

* 启用「异常处理」开关后，系统将自动创建一个异常分支（Catch）
* 用户可在异常分支中添加备用节点，如：

  * 发送错误提醒
  * 返回默认数据
  * 记录日志并终止流程

该机制可有效防止因第三方服务异常导致整个流程中断。

---

## 应用示例

* 使用自定义工具调用 ERP 系统获取订单信息
* 使用 MCP 工具同步数据至数据中台

---

## 小贴士

* 使用前请确保相关工具已正确创建并测试通过
* 输入参数尽量使用工作流变量，确保流程通用性与可复用性
* 对重要调用建议开启异常处理保障流程健壮性
