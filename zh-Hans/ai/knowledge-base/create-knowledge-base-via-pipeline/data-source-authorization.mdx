---
title: 数据源授权
sidebar_position: 6
---

XpertAI 支持多种外部数据源的连接。为了确保数据安全与访问控制，系统提供了灵活的授权机制，使知识流水线能够安全地访问和导入数据。
在 XpertAI 中，数据源授权可以通过 **系统集成** 或 **默认环境变量** 实现，支持多种授权方式，包括 **API Key** 与 **OAuth**。

---

## 数据源授权机制概述

XpertAI 的授权体系由两部分构成：

1. **默认环境变量授权**
   在系统部署或工作区环境中，可以通过环境变量预设各类 API Key，知识流水线在运行时将自动使用这些凭据完成授权，无需人工绑定。

2. **系统集成授权**
   XpertAI 提供统一的系统集成入口，管理员或开发者可在此配置外部服务的 API Key 或 OAuth （开发中）授权信息。
   系统集成支持多种认证模式，包括企业 API Key、OAuth Client，以及未来将支持的服务账号与签名令牌等方式。

![pipeline integrations](/public/img/ai/pipeline/pipeline-plugin-system-integration.png)

---

## 数据源授权入口

在 XpertAI 中，你可以通过以下两种方式配置数据源授权：

### 方式一：通过知识流水线编排界面

进入知识流水线编排界面，添加所需的数据源节点。
在右侧面板中点击 **绑定**，系统会自动检测该数据源是否存在有效授权：

* 若已配置系统集成或环境变量，将自动连接；
* 若无授权信息，将提示前往系统集成页面进行授权。

---

### 方式二：通过系统设置界面

点击左下角设置，选择 **系统集成**，进入系统集成配置页面。
选择需要授权的系统，点击 **配置**，即可为该系统添加或更新授权凭据。

---

## 支持的数据源与授权方式

| 数据源        | 默认环境变量 | API Key | OAuth |
| ---------- | ------ | ------- | ----- |
| Firecrawl  | ✅      | ✅       |       |
| 飞书文档（Lark） | ✅      | ✅       | ✅     |

> 更多第三方数据源（如 OneDrive、Notion、Google Drive）将在后续版本中支持。

---

## 授权方式说明

### 1. API Key 授权

API Key 是最常见的授权方式，适用于需要直接调用外部接口的集成服务。
用户可在相应服务平台生成 API Key 并通过以下两种方式配置：

* **方式 A：环境变量授权**
  将 API Key 写入系统环境变量（如 `LARK_APP_ID`、`LARK_APP_SECRET`）。流水线运行时将自动识别使用。

* **方式 B：系统集成配置**
  前往 **系统设置 → 系统集成**，选择对应系统并点击 **添加 API Key**。
  输入密钥后点击 **保存**，授权信息将被安全加密存储，状态显示为 **已连接**。

---

### 2. OAuth 授权 （开发中）

OAuth 是一种标准化授权协议，适用于用户需通过登录方式访问云端文档或企业资源的场景。
XpertAI 支持两种 OAuth 授权模式：

#### 模式 A：默认客户端（系统内置）

对于 SaaS 版本的 XpertAI，部分主流数据源（如飞书文档）已由官方预置 OAuth 客户端配置。
用户仅需点击授权并确认权限范围，即可一键完成授权。

#### 模式 B：自定义客户端

对于自建部署或未预置的数据源，可在第三方平台注册并获取 OAuth Client 参数（`Client ID` 与 `Client Secret`）。
随后在 **系统设置 → 系统集成 → 添加 OAuth** 页面中填写并保存，即可完成授权。
