---
title: 召回测试
sidebar_position: 6
---

在 **XpertAI 知识库** 中，内置了强大的 **召回测试功能**，用于模拟真实用户查询场景，通过输入关键词或问题来检验知识库的召回质量。
系统会自动调用已索引的内容区块，并根据相似度分值进行排序。一般而言，问题与内容块的匹配度越高，AI 模型输出的答案就越接近原始文档语义，体现出更优的“知识召回”效果。

你可以自由切换不同的检索方式与参数配置，以直观地评估召回结果的相关性与覆盖度。
XpertAI 当前的知识库采用 **统一的分块树状结构（Chunk Tree Structure）**，因此所有测试均基于父子层级的语义召回逻辑。

---

## 通用测试模式

在 **源文本输入框** 中输入常见用户问题或关键词后，点击 **测试** 按钮，即可在右侧的 **召回结果区** 中查看匹配的内容区块。

* 每个内容块右上角显示相似度得分，表示问题与该区块的匹配程度。
* 得分越高，说明该区块与问题语义的相关度越强。
* 点击内容块可查看详细内容及其在文档中的来源。

每个召回结果下方会显示文档信息来源，你可以借此判断分块是否合理、语义边界是否清晰。

---

## 父子结构测试模式

XpertAI 的知识库统一使用 **树状分块结构**，子块在召回时会带出其父块上下文，为 AI 模型提供更完整的语义信息。

在测试过程中：

* 用户输入问题后，系统会首先匹配最相关的子分块；
* 然后自动回溯其父分块，整合上下文进行展示；
* 匹配得分显示在右上角，用于衡量命中片段与问题的匹配程度。

点击召回结果中的引用源可直接查看原文内容。
详情页左侧为父分块信息，右侧为命中的子分块。系统可能命中多个子节点，并在每个节点前展示对应匹配得分，便于开发者分析分块合理性与召回表现。

---

## 查询记录与应用调用

在 **记录** 面板中，可以查看召回测试的历史查询记录。
如果该知识库已被绑定至数字专家或其他 AI 应用中，应用内部触发的知识库查询也会在此同步展示，便于统一追踪召回日志与效果。

---

## 调整文本检索方式

点击输入框右上角的 **检索配置图标**，即可切换当前知识库的检索方式及参数。
修改后的设置仅在当前召回测试中生效，方便开发者对比不同检索策略的效果。
若要全局修改，请前往 **“知识库设置 > 检索设置”** 进行保存。

---

## 召回测试建议步骤

1. **准备测试集**：设计覆盖常见用户问题的测试问题集，确保场景多样。
2. **选择检索策略**：根据内容特点与应用场景（如是否为问答类、多语言语料等）选择合适的检索模式。
3. **调优参数**：通过调整召回数量（TopK）和相似度阈值（Score），平衡召回的相关性与完整性。

---

## TopK 与 Score 参数说明

* **TopK**：表示按相似度分数倒序时召回的最大内容块数量。

  * 值较小：召回更精简，但可能遗漏部分相关片段。
  * 值较大：召回更全面，但可能包含低相关片段，影响最终回答质量。

* **Score（召回阈值）**：设定允许召回的最低相似度分数。

  * 值较低：召回更宽松，包含更多低相关内容。
  * 值较高：召回更严格，仅保留高相关分段，但可能错过边缘性信息。

通过动态调整这两个参数，可以快速找到最适合特定知识库内容特征与业务语义的最佳检索配置。

---

✅ **小结**

XpertAI 的召回测试不仅是验证知识库构建质量的关键工具，更是优化知识流水线、提升 AI 应答准确度的重要手段。
借助召回日志、父子层级结构与检索参数调优，团队可以以可视化、可验证的方式不断迭代知识库质量，让每一次回答更贴近真实业务语义。
